<!DOCTYPE html><html><head><base href="MeshPro - Web">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MeshPro Web - Asset Search & Export</title>
<style>
  :root {
    --primary-color: #61dafb;
    --background-color: #1e1e1e;
    --card-background: #2d2d2d;
    --text-color: #e0e0e0;
    --input-background: #3a3a3a;
    --border-color: #4a4a4a;
    --hover-color: #4fa8d5;
    --tooltip-background: #333;
    --notification-background: #4CAF50;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    transition: all 0.3s ease;
  }

  .container {
    background-color: var(--card-background);
    border-radius: 12px;
    max-width: 1200px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    width: 1200px;
    max-width: 800px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
  }

  h1, h2 {
    color: var(--primary-color);
    text-align: center;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  h1 {
    font-size: 3em;
  }

  h2 {
    font-size: 2em;
  }

  .input-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 20px;
  }

  input[type="text"] {
    width: 100%;
    padding: 15px;
    font-size: 18px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background-color: var(--input-background);
    color: var(--text-color);
    transition: all 0.3s ease;
    margin-bottom: 15px;
  }

  input[type="text"]:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(97, 218, 251, 0.3);
  }

  button {
    padding: 15px 30px;
    font-size: 18px;
    background-color: var(--primary-color);
    color: var(--background-color);
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button:hover {
    background-color: var(--hover-color);
  }

  #resultList {
    width: 100%;
    max-height: 400px;
    overflow-y: auto;
    background-color: var(--input-background);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 20px;
  }

  .asset-item {
    padding: 10px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.3s ease;
    position: relative;
  }

  .asset-item:hover {
    background-color: var(--hover-color);
  }

  #exportResult {
    width: calc(100% - 34px);
    height: 300px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    padding: 15px;
    overflow-y: auto;
    background-color: var(--input-background);
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.6;
    white-space: pre-wrap;
    word-break: break-all;
  }

  .loader {
    border: 5px solid var(--input-background);
    border-top: 5px solid var(--primary-color);
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin: 20px auto;
    display: none;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .count {
    text-align: center;
    margin-top: 20px;
    font-size: 18px;
    color: var(--primary-color);
  }

  .context-menu {
    display: none;
    position: absolute;
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 5px 0;
    z-index: 1000;
  }

  .context-menu-item {
    padding: 8px 12px;
    cursor: pointer;
  }

  .context-menu-item:hover {
    background-color: var(--hover-color);
  }

  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background-color: var(--notification-background);
    color: white;
    padding: 15px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }

  .notification.show {
    opacity: 1;
  }

  .notification-icon {
    margin-right: 10px;
  }

  .tabs {
    display: flex;
    margin-bottom: 20px;
  }

  .tab {
    padding: 10px 20px;
    background-color: var(--input-background);
    color: var(--text-color);
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .tab.active {
    background-color: var(--primary-color);
    color: var(--background-color);
  }

  .tab-content {
    display: none;
  }

  .tab-content.active {
    display: block;
  }

  #themeButton {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--primary-color);
    color: var(--background-color);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  #themeButton:hover {
    background-color: var(--hover-color);
  }

  .theme-popup {
    display: none;
    position: fixed;
    bottom: 80px;
    right: 20px;
    background-color: var(--card-background);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 15px;
    z-index: 1000;
  }

  .theme-option {
    padding: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .theme-option:hover {
    background-color: var(--hover-color);
  }

  body.light-mode {
    --primary-color: #0078d4;
    --background-color: #f0f0f0;
    --card-background: #ffffff;
    --text-color: #333333;
    --input-background: #e0e0e0;
    --border-color: #cccccc;
    --hover-color: #005a9e;
    --tooltip-background: #f5f5f5;
  }

  body.midnight-black {
    --primary-color: #61dafb;
    --background-color: #000000;
    --card-background: #0a0a0a;
    --text-color: #ffffff;
    --input-background: #0f0f0f;
    --border-color: #1a1a1a;
    --hover-color: #4fa8d5;
    --tooltip-background: #1a1a1a;
  }

  body.midnight-black::-webkit-scrollbar {
    width: 12px;
  }

  body.midnight-black::-webkit-scrollbar-track {
    background: #0a0a0a;
  }

  body.midnight-black::-webkit-scrollbar-thumb {
    background-color: #2a2a2a;
    border-radius: 6px;
    border: 3px solid #0a0a0a;
  }

  body.star-light {
    --primary-color: #61dafb;
    --background-color: linear-gradient(135deg, #000033 0%, #000066 100%);
    --card-background: rgba(10, 10, 20, 0.8);
    --text-color: #ffffff;
    --input-background: rgba(20, 20, 40, 0.8);
    --border-color: #4a4a6a;
    --hover-color: #4fa8d5;
    --tooltip-background: rgba(20, 20, 40, 0.8);
  }

  body.star-light {
    background: var(--background-color);
  }

  body.star-light::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 160px 120px, #ddd, rgba(0,0,0,0));
    background-repeat: repeat;
    background-size: 200px 200px;
    animation: twinkle 5s infinite;
    z-index: -1;
  }

  @keyframes twinkle {
    0% { opacity: 0.5; }
    50% { opacity: 1; }
    100% { opacity: 0.5; }
  }

  @keyframes shootingStar {
    0% {
      transform: translateX(0) translateY(0) rotate(-45deg);
      opacity: 1;
    }
    100% {
      transform: translateX(-100vw) translateY(100vh) rotate(-45deg);
      opacity: 0;
    }
  }

  .shooting-star {
    position: fixed;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: #fff;
    box-shadow: 0 0 5px 1px #fff;
    opacity: 0;
    z-index: -1;
  }

  .shooting-star::before {
    content: "";
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, #fff, transparent);
  }
</style>
</head>
<body>
  <h1>MeshPro - Web version</h1>

  <div class="container">
    <div class="tabs" style="display: flex; justify-content: center; margin-bottom: 20px;">
      <button class="tab active" data-tab="search" style="padding: 15px 30px; font-size: 18px; margin: 0 10px;">Search</button>
      <button class="tab" data-tab="export" style="padding: 15px 30px; font-size: 18px; margin: 0 10px;">Export</button>
    </div>

    <div id="searchTab" class="tab-content active">
      <h2>Asset Search</h2>
      <div class="input-container">
        <input type="text" id="searchInput" placeholder="Enter search term...">
        <button id="searchButton">Search</button>
      </div>
      <div id="resultList">
        <p style="text-align: center; color: #ff9800; font-style: italic; padding: 20px; font-size: 1.2em; font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); background-color: rgba(255, 152, 0, 0.1); border-radius: 8px; border: 2px dashed #ff9800;">
          Your asset library is empty. Start your search above!
        </p>
      </div>
      <div class="loader" id="searchLoader"></div>
      <div id="totalAssetCount" class="count"></div>
      <div id="assetCount" class="count"></div>
    </div>

    <div id="exportTab" class="tab-content">
      <h2>Asset Export</h2>
      <div class="input-container">
        <input type="text" id="exportInput" placeholder="Asset path to export...">
        <button id="exportButton">Export</button>
      </div>
      <div id="exportResult"></div>
    </div>
  </div>

  <div id="contextMenu" class="context-menu">
    <div class="context-menu-item" id="exportMenuItem">Export</div>
    <div class="context-menu-item" id="copyMenuItem">Copy Path</div>
  </div>

  <div id="notification" class="notification">
    <span class="notification-icon">âœ“</span>
    <span id="notificationText"></span>
  </div>

  <button id="themeButton">ðŸŽ¨</button>

  <div id="themePopup" class="theme-popup">
    <div class="theme-option" data-theme="light-mode">Light Mode</div>
    <div class="theme-option" data-theme="dark">Dark Mode</div>
    <div class="theme-option" data-theme="midnight-black">Midnight Black</div>
    <div class="theme-option" data-theme="star-light">Star Light</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
  <script>
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const exportInput = document.getElementById('exportInput');
    const exportButton = document.getElementById('exportButton');
    const resultList = document.getElementById('resultList');
    const searchLoader = document.getElementById('searchLoader');
    const assetCount = document.getElementById('assetCount');
    const totalAssetCount = document.getElementById('totalAssetCount');
    const exportResult = document.getElementById('exportResult');
    const contextMenu = document.getElementById('contextMenu');
    const exportMenuItem = document.getElementById('exportMenuItem');
    const copyMenuItem = document.getElementById('copyMenuItem');
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notificationText');
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const themeButton = document.getElementById('themeButton');
    const themePopup = document.getElementById('themePopup');
    const themeOptions = document.querySelectorAll('.theme-option');

    const primaryApiUrl = 'https://export-service.dillyapis.com/v1/assets';
    const backupApiUrl = 'https://fortnitecentral.genxgames.gg/api/v1/assets';
    const primaryExportApiUrl = 'https://export-service.dillyapis.com/v1/export?path=';
    const backupExportApiUrl = 'https://fortnitecentral.genxgames.gg/api/v1/export?path=';

    let assets = [];
    let selectedAsset = '';
    let shootingStarInterval;

    async function loadAssets() {
      searchLoader.style.display = 'block';
      searchButton.disabled = true;
      searchInput.disabled = true;

      try {
        const cachedAssets = await localforage.getItem('assetCache');
        if (cachedAssets) {
          assets = cachedAssets;
          console.log('Assets loaded from cache');
        } else {
          const response = await fetch(primaryApiUrl);
          if (!response.ok) {
            throw new Error('Primary API failed');
          }
          assets = await response.json();
          await localforage.setItem('assetCache', assets);
          console.log('Assets loaded from primary API and cached');
        }
      } catch (error) {
        console.error('Error loading assets from primary API:', error);
        try {
          const response = await fetch(backupApiUrl);
          if (!response.ok) {
            throw new Error('Backup API failed');
          }
          assets = await response.json();
          await localforage.setItem('assetCache', assets);
          console.log('Assets loaded from backup API and cached');
        } catch (backupError) {
          console.error('Error loading assets from backup API:', backupError);
          resultList.textContent = 'Failed to load assets. Please try again later.';
        }
      } finally {
        searchLoader.style.display = 'none';
        searchButton.disabled = false;
        searchInput.disabled = false;
        totalAssetCount.textContent = `Total assets loaded: ${assets.length}`;
      }
    }

    function searchAssets(searchTerm) {
      const lowerSearchTerm = searchTerm.toLowerCase();
      return assets.filter(asset => asset.toLowerCase().includes(lowerSearchTerm));
    }

    function displayAssets(foundAssets) {
      resultList.innerHTML = '';
      foundAssets.forEach(asset => {
        const assetItem = document.createElement('div');
        assetItem.className = 'asset-item';
        assetItem.textContent = asset;
        assetItem.addEventListener('click', () => copyToClipboard(asset));
        assetItem.addEventListener('contextmenu', (e) => showContextMenu(e, asset));
        resultList.appendChild(assetItem);
      });
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showNotification('Copied to clipboard!');
      }, (err) => {
        console.error('Error copying text: ', err);
      });
    }

    function showContextMenu(event, asset) {
      event.preventDefault();
      selectedAsset = asset;
      contextMenu.style.display = 'block';
      contextMenu.style.left = `${event.pageX}px`;
      contextMenu.style.top = `${event.pageY}px`;
    }

    async function performSearch() {
      const searchTerm = searchInput.value.trim();
      if (searchTerm === '') return;

      resultList.textContent = 'Searching...';
      const foundAssets = searchAssets(searchTerm);

      if (foundAssets.length > 0) {
        displayAssets(foundAssets);
        assetCount.textContent = `Found assets: ${foundAssets.length}`;
      } else {
        resultList.textContent = `No assets found for '${searchTerm}'.`;
        assetCount.textContent = 'Found assets: 0';
      }
    }

    async function exportAsset(asset) {
      searchLoader.style.display = 'block';

      try {
        const response = await fetch(`${primaryExportApiUrl}${encodeURIComponent(asset)}`);
        if (!response.ok) {
          throw new Error('Primary export API failed');
        }
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('Error exporting asset from primary API:', error);
        try {
          const response = await fetch(`${backupExportApiUrl}${encodeURIComponent(asset)}&raw=true`);
          if (!response.ok) {
            throw new Error('Backup export API failed');
          }
          const data = await response.json();
          return data;
        } catch (backupError) {
          console.error('Error exporting asset from backup API:', backupError);
          showNotification('Failed to export asset', false);
          return null;
        }
      } finally {
        searchLoader.style.display = 'none';
      }
    }

    function showNotification(message, success = true) {
      notificationText.textContent = message;
      notification.classList.add('show');
      notification.style.backgroundColor = success ? '#4CAF50' : '#f44336';
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function switchTab(tabName) {
      tabs.forEach(tab => tab.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));
      
      const activeTab = document.querySelector(`.tab[data-tab="${tabName}"]`);
      const activeContent = document.getElementById(`${tabName}Tab`);
      
      activeTab.classList.add('active');
      activeContent.classList.add('active');
    }

    function toggleThemePopup() {
      themePopup.style.display = themePopup.style.display === 'block' ? 'none' : 'block';
    }

    function generateStars() {
      const stars = [];
      for (let i = 0; i < 100; i++) {
        const x = Math.random() * 100;
        const y = Math.random() * 100;
        const size = Math.random() * 2 + 1;
        const opacity = Math.random() * 0.5 + 0.5;
        stars.push(`${x}% ${y}% ${size}px ${size}px rgba(255, 255, 255, ${opacity})`);
      }
      return stars.join(', ');
    }

    function createShootingStar() {
      const shootingStar = document.createElement('div');
      shootingStar.className = 'shooting-star';
      shootingStar.style.top = `${Math.random() * window.innerHeight}px`;
      shootingStar.style.left = `${window.innerWidth}px`;
      shootingStar.style.animation = `shootingStar ${Math.random() * 2 + 1}s linear`;
      document.body.appendChild(shootingStar);

      shootingStar.addEventListener('animationend', () => {
        shootingStar.remove();
      });
    }

    function startShootingStars() {
      shootingStarInterval = setInterval(() => {
        createShootingStar();
      }, Math.random() * 20000 + 10000);
    }

    function stopShootingStars() {
      clearInterval(shootingStarInterval);
      const shootingStars = document.querySelectorAll('.shooting-star');
      shootingStars.forEach(star => star.remove());
    }

    function setTheme(theme) {
      document.body.className = theme;
      localStorage.setItem('theme', theme);
      themePopup.style.display = 'none';

      if (theme === 'star-light') {
        const stars = generateStars();
        document.body.style.setProperty('--star-background', stars);
        startShootingStars();
      } else {
        document.body.style.removeProperty('--star-background');
        stopShootingStars();
      }
    }

    searchButton.addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performSearch();
      }
    });

    exportButton.addEventListener('click', async () => {
      const assetPath = exportInput.value.trim();
      if (!assetPath) return;

      const exportedData = await exportAsset(assetPath);
      if (exportedData) {
        exportResult.textContent = JSON.stringify(exportedData, null, 2);
        showNotification('Asset exported successfully!');
      }
    });

    exportMenuItem.addEventListener('click', async () => {
      const exportedData = await exportAsset(selectedAsset);
      if (exportedData) {
        switchTab('export');
        exportInput.value = selectedAsset;
        exportResult.textContent = JSON.stringify(exportedData, null, 2);
        showNotification('Asset exported successfully!');
      }
    });

    copyMenuItem.addEventListener('click', async () => {
      navigator.clipboard.writeText(selectedAsset).then(() => {
        console.log('Text copied to clipboard');
        showNotification("Path successfully copied!")
    }).catch(err => {  showNotification('Failed to copy text');  });

    })


    document.addEventListener('click', (e) => {
      if (!themeButton.contains(e.target) && !themePopup.contains(e.target)) {
        themePopup.style.display = 'none';
      }
      contextMenu.style.display = 'none';
    });

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        switchTab(tab.dataset.tab);
      });
    });

    themeButton.addEventListener('click', toggleThemePopup);

    themeOptions.forEach(option => {
      option.addEventListener('click', () => setTheme(option.dataset.theme));
    });

    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      setTheme(savedTheme);
    }

    loadAssets();
  </script>

</body></html>
